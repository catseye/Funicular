PLATFORM="i386-qemu"
INSTALL_IMAGE='NetBSD-6.1.5-i386.iso'
INSTALL_IMAGE_URL='ftp://iso.fr.netbsd.org/pub/NetBSD/NetBSD-6.1.5/iso/NetBSD-6.1.5-i386.iso'
SETUP_IMAGE='setup-netbsd.iso'
export SYSTEM_IMAGE='wd0.img'
DIST_IMAGE='floppy.img'

DISTFILES="
  http://www.python.org/ftp/python/2.7.6/Python-2.7.6.tgz
  https://github.com/catseye/toolshelf/archive/0.1-2014.0818.zip
  http://ftp.gnu.org/gnu/make/make-3.81.tar.gz
  http://www.nano-editor.org/dist/v2.2/nano-2.2.6.tar.gz
  http://mercurial.selenic.com/release/mercurial-1.9.3.tar.gz
  http://www.cpan.org/src/5.0/perl-5.18.2.tar.gz
  http://cvs.haskell.org/Hugs/downloads/2006-09/hugs98-plus-Sep2006.tar.gz
  http://www.erlang.org/download/otp_src_R16B03-1.tar.gz
  http://code.call-cc.org/releases/4.8.0/chicken-4.8.0.5.tar.gz
  http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz
"

DISTREPOS="
  catseye/alpaca
  catseye/animals
  catseye/apple-befunge
  catseye/arboretuum
  catseye/befos
  catseye/befunge-93
  catseye/beta-juliet
  catseye/beturing
  catseye/bhuna
  catseye/braktif
  catseye/bubble-escape
  catseye/burro
  catseye/c64-demo-depot
  catseye/cabra
  catseye/castile
  catseye/cfluviurrh
  catseye/chrysoberyl
  catseye/circute
  catseye/console-virtual
  catseye/corona-realm-of-magic
  catseye/crone
  catseye/deturgenchry
  catseye/dieter
  catseye/dipple
  catseye/disksumo
  catseye/dungeons-of-ekileugor
  catseye/eightebed
  catseye/electronics-projects
  catseye/emmental
  catseye/etcha
  catseye/exanoke
  catseye/falderal
  catseye/fbbi
  catseye/flip
  catseye/flobnar
  catseye/funge-98
  catseye/funicular
  catseye/gemooy
  catseye/granola-m
  catseye/hev
  catseye/html5-gewgaws
  catseye/hunter
  catseye/illgol-grand-mal
  catseye/iphigeneia
  catseye/jaccia
  catseye/jolverine
  catseye/kangaroo-iceberg
  catseye/kelxquoia
  catseye/kosheri
  catseye/larabee
  catseye/maentwrog
  catseye/mascarpone
  catseye/muriel
  catseye/mzstorkipiwanbotbotbot
  catseye/n-dcnc
  catseye/netusb
  catseye/nhohnhehr
  catseye/noit-o-mnain-worb
  catseye/pail
  catseye/pibfi
  catseye/pixley
  catseye/pl-goto-.net
  catseye/pophery
  catseye/quylthulg
  catseye/redgreen
  catseye/realpath
  catseye/robin
  catseye/rube
  catseye/rube-ii
  catseye/sally
  catseye/sbeezg
  catseye/shelta
  catseye/sickbay
  catseye/sixtypical
  catseye/smetana
  catseye/smith
  catseye/specs-on-spec
  catseye/squishy2k
  catseye/strelnokoff
  catseye/super-wumpus-land
  catseye/tamsin
  catseye/the-swallows
  catseye/thue
  catseye/toolshelf
  catseye/tpis
  catseye/treacle
  catseye/troupe
  catseye/unlikely
  catseye/velo
  catseye/version
  catseye/whothm
  catseye/wierd
  catseye/wunnel
  catseye/xigxag
  catseye/xoomonk
  catseye/yolk
  catseye/yoob
  catseye/yoob.js
  catseye/ypsilax
  catseye/yucca
  catseye/zowie
  catseye/zzrk
  catseye/ophis
  catseye/openzz
  catseye/minischeme
"

setup() {
    genisoimage -R -J -D -joliet-long -o ${SETUP_IMAGE} staging_area
}

install_instructions() {
    echo <<EOF
* At the boot prompt, select "1. Install NetBSD"
* After it boots, select a language for installation messages, and a keyboard type.
* At the next menu, select "Install NetBSD to hard disk".  Then "yes".
* At the "Select your distribution" menu, select "Custom installation".
* At the next menu, arrow up to "Compiler Tools" and hit Enter to select it.
  Then arrow back down and select "Install selected sets".
* This is the correct geometry.
* Use the entire disk.
* Yes, install the NetBSD bootcode.
* Use existing partition sizes.  Partition sizes ok.  Name is irrelevant.  Yes, proceed.
* At "Bootblocks selection": Use BIOS console.
* Install from CD-ROM.
* When that's done - don't bother configuring anything.
* When back at the main menu, select "Exit Install System" and type `shutdown -p now`
EOF
}

setup_instructions() {
    echo <<EOF
* Login as root (which will not have a password. You may or may not wish to give it one,
  depending on your security needs.)
* As root, run:
        mount /cdrom
        cp /cdrom/setup-netbsd.sh .
        . ./setup-netbsd.sh
* Follow the instructions in the script.
* Once it is finished, log out and log in again as `user`. (You may or may not wish to
  run passwd to give user a password at this point, depending on your security needs.)
* Then run:
        th dock @/cdrom/infrastructure.catalog @/cdrom/catseye.catalog
EOF
}
